<!-- user_page.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Page</title>
</head>
<body>
    <h1>Welcome, {{ name }}!</h1>

    {% if username == 'admin' %}
        <h2>Users Table</h2>
        <table border="1">
            <thead>
                <tr>
                    <th>Username</th>
                    <th>Name</th>
                    <th>Age</th>
                    <th>Height</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                    <tr>
                        <td>{{ user[0] }}</td>
                        <td>{{ user[2] }}</td>
                        <td>{{ user[3] }}</td>
                        <td>{{ user[4] }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        {% for user in users %}
            <h2>{{ user[0] }}'s Recipes</h2>
            <table border="1">
                <thead>
                    <tr>
                        <th>Recipe Name</th>
                        <th>Ingredients</th>
                        <th>Instructions</th>
                        <th>Servings</th>
                        <th>Calories</th>
                        <th>Protein</th>
                        <th>Fat</th>
                        <th>Carbs</th>
                    </tr>
                </thead>
                <tbody>
                    {% for recipe in user_recipes %}
                        {% if recipe[1] == user[0] %}
                            <tr>
                                <td>{{ recipe[0] }}</td>
                                <td>{{ recipe[2] }}</td>
                                <td>{{ recipe[3] }}</td>
                                <td>{{ recipe[4] }}</td>
                                <td>{{ recipe[5] }}</td>
                                <td>{{ recipe[6] }}</td>
                                <td>{{ recipe[7] }}</td>
                                <td>{{ recipe[8] }}</td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                </tbody>
            </table>
        {% endfor %}

    {% else %}
        <div style="text-align: center;">
            <h2>Your Recipes</h2>
            <table border="1">
                <thead>
                    <tr>
                        <th>Recipe Name</th>
                        <th>Ingredients</th>
                        <th>Instructions</th>
                        <th>Servings</th>
                        <th>Calories</th>
                        <th>Protein</th>
                        <th>Fat</th>
                        <th>Carbs</th>
                    </tr>
                </thead>
                <tbody>
                    {% for recipe in user_recipes %}
                        <tr>
                            <td>{{ recipe[0] }}</td>
                            <td>{{ recipe[2] }}</td>
                            <td>{{ recipe[3] }}</td>
                            <td>{{ recipe[4] }}</td>
                            <td>{{ recipe[5] }}</td>
                            <td>{{ recipe[6] }}</td>
                            <td>{{ recipe[7] }}</td>
                            <td>{{ recipe[8] }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <h3>Enter Ingredient to Search!</h3>
        <form action="/search" method="post">
            Ingredient:
            <input type="text" name="Ingredient"></br>
            <input type="submit" value="Search">
        </form>
        <p><a href="{{ add_recipe_url }}">Add a Recipe!</a></p>
    {% endif %}

    <p><a href="/">Go Home</a></p>

</body>
</html>
